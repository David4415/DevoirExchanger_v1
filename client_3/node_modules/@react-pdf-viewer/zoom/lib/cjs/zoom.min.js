"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@react-pdf-viewer/core");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(e),r=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10\n                M10.5,5.499v10"}))},c=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M10.5,0.499c5.523,0,10,4.477,10,10s-4.477,10-10,10s-10-4.477-10-10S4.977,0.499,10.5,0.499z\n                M23.5,23.499\n                l-5.929-5.929\n                M5.5,10.499h10"}))},u=function(){return(u=Object.assign||function(e){for(var t,n=1,o=arguments.length;n<o;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e}).apply(this,arguments)},i=function(e){var t=o.useState(e.get("scale")||0),n=t[0],r=t[1],c=function(e){r(e)};return o.useEffect((function(){return e.subscribe("scale",c),function(){e.unsubscribe("scale",c)}}),[]),{scale:n}},a=function(e){var t=e.children,n=e.store;return(t||function(e){return o.createElement(o.Fragment,null,Math.round(100*e.scale)+"%")})({scale:i(n).scale})},l=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],m=function(e){return l.find((function(t){return t>e}))||e},f=function(e){var t=l.findIndex((function(t){return t>=e}));return-1===t||0===t?e:l[t-1]},s=function(e){var t=e.containerRef,n=e.store,r=function(e){if(!e.shiftKey&&!e.altKey&&("undefined"!=typeof window&&/(Mac|iPhone|iPod|iPad)/i.test(navigator.platform)?e.metaKey:e.ctrlKey)){var o=t.current;if(o&&document.activeElement&&document.activeElement.contains(o)){var r=n.get("zoom");if(r){var c=n.get("scale")||1,u=1;switch(e.key){case"-":u=f(c);break;case"=":u=m(c);break;case"0":u=1;break;default:u=c}u!==c&&(e.preventDefault(),r(u))}}}};return o.useEffect((function(){if(t.current)return document.addEventListener("keydown",r),function(){document.removeEventListener("keydown",r)}}),[t.current]),o.createElement(o.Fragment,null)},p=[.5,.75,1,1.25,1.5,2,3,4],v={left:0,top:8},E=function(e){var n=e.scale,r=e.onZoom,c=o.useContext(t.LocalizationContext);return o.createElement(t.Popover,{position:t.Position.BottomCenter,target:function(e){return o.createElement("span",{className:"rpv-zoom__popover-target",onClick:function(){e()}},o.createElement("span",{className:"rpv-zoom__popover-target-scale"},Math.round(100*n),"%"),o.createElement("span",{className:"rpv-zoom__popover-target-arrow"}))},content:function(e){return o.createElement(t.Menu,null,Object.keys(t.SpecialZoomLevel).map((function(n){var u=n;return o.createElement(t.MenuItem,{key:u,onClick:function(){e(),r(u)}},function(e){switch(e){case t.SpecialZoomLevel.ActualSize:return c&&c.zoom?c.zoom.actualSize:"Actual size";case t.SpecialZoomLevel.PageFit:return c&&c.zoom?c.zoom.pageFit:"Page fit";case t.SpecialZoomLevel.PageWidth:return c&&c.zoom?c.zoom.pageWidth:"Page width"}}(u))})),o.createElement(t.MenuDivider,null),p.map((function(n){return o.createElement(t.MenuItem,{key:n,onClick:function(){e(),r(n)}},Math.round(100*n)+"%")})))},offset:v,closeOnClickOutside:!0,closeOnEscape:!0})},d=function(e){var t=e.children,n=e.store;return(t||function(e){return o.createElement(E,{scale:e.scale,onZoom:e.onZoom})})({scale:i(n).scale,onZoom:function(e){var t=n.get("zoom");t&&t(e)}})},z={left:0,top:8},C=function(e){var n=e.onClick,c=o.useContext(t.LocalizationContext),u=c&&c.zoom?c.zoom.zoomIn:"Zoom in";return o.createElement(t.Tooltip,{position:t.Position.BottomCenter,target:o.createElement(t.MinimalButton,{onClick:n},o.createElement(r,null)),content:function(){return u},offset:z})},k=function(e){var t=e.children,n=e.store,r=i(n).scale;return(t||function(e){return o.createElement(C,{onClick:e.onClick})})({onClick:function(){var e=n.get("zoom");e&&e(m(r))}})},g={left:0,top:8},h=function(e){var n=e.onClick,r=o.useContext(t.LocalizationContext),u=r&&r.zoom?r.zoom.zoomOut:"Zoom out";return o.createElement(t.Tooltip,{position:t.Position.BottomCenter,target:o.createElement(t.MinimalButton,{onClick:n},o.createElement(c,null)),content:function(){return u},offset:g})},M=function(e){var t=e.children,n=e.store,r=i(n).scale;return(t||function(e){return o.createElement(h,{onClick:e.onClick})})({onClick:function(){var e=n.get("zoom");e&&e(f(r))}})},Z=function(e){var n=e.onClick,c=o.useContext(t.LocalizationContext),u=c&&c.zoom?c.zoom.zoomIn:"Zoom in";return o.createElement(t.MenuItem,{icon:o.createElement(r,null),onClick:n},u)},O=function(e){var n=e.onClick,r=o.useContext(t.LocalizationContext),u=r&&r.zoom?r.zoom.zoomOut:"Zoom out";return o.createElement(t.MenuItem,{icon:o.createElement(c,null),onClick:n},u)};exports.ZoomInIcon=r,exports.ZoomOutIcon=c,exports.zoomPlugin=function(e){var n=o.useMemo((function(){return Object.assign({},{enableShortcuts:!0},e)}),[]),r=o.useMemo((function(){return t.createStore({})}),[]),c=function(e){return o.createElement(k,u({},e,{store:r}))},i=function(e){return o.createElement(M,u({},e,{store:r}))},l=function(e){return o.createElement(d,u({},e,{store:r}))};return{renderViewer:function(e){var t=e.slot;if(!n.enableShortcuts)return t;var c={children:o.createElement(o.Fragment,null,o.createElement(s,{containerRef:e.containerRef,store:r}),t.children)};return u(u({},t),c)},install:function(e){r.update("zoom",e.zoom)},onViewerStateChange:function(e){return r.update("scale",e.scale),e},zoomTo:function(e){var t=r.get("zoom");t&&t(e)},CurrentScale:function(e){return o.createElement(a,u({},e,{store:r}))},ZoomIn:c,ZoomInButton:function(){return o.createElement(c,null,(function(e){return o.createElement(C,u({},e))}))},ZoomInMenuItem:function(e){return o.createElement(c,null,(function(t){return o.createElement(Z,{onClick:function(){t.onClick(),e.onClick()}})}))},ZoomOut:i,ZoomOutButton:function(){return o.createElement(i,null,(function(e){return o.createElement(h,u({},e))}))},ZoomOutMenuItem:function(e){return o.createElement(i,null,(function(t){return o.createElement(O,{onClick:function(){t.onClick(),e.onClick()}})}))},Zoom:l,ZoomPopover:function(){return o.createElement(l,null,(function(e){return o.createElement(E,u({},e))}))}}};
