"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),n=require("@react-pdf-viewer/core");function t(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var r=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,r.get?r:{enumerable:!0,get:function(){return e[t]}})}})),n.default=e,Object.freeze(n)}var r,l=t(e),u=function(){return l.createElement(n.Icon,{size:16},l.createElement("path",{d:"M11.5 23.499L11.5 14.499"}),l.createElement("path",{d:"M7.5 18.499L11.5 14.499 15.5 18.499"}),l.createElement("path",{d:"M11.5 1.499L11.5 10.499"}),l.createElement("path",{d:"M7.5 6.499L11.5 10.499 15.5 6.499"}),l.createElement("path",{d:"M20.5 12.499L1.5 12.499"}))},c=function(){return(c=Object.assign||function(e){for(var n,t=1,r=arguments.length;t<r;t++)for(var l in n=arguments[t])Object.prototype.hasOwnProperty.call(n,l)&&(e[l]=n[l]);return e}).apply(this,arguments)},o=function(){return l.createElement(n.Icon,{size:16},l.createElement("path",{d:"M0.5 12L23.5 12"}),l.createElement("path",{d:"M11.5 1L11.5 23"}),l.createElement("path",{d:"M8.5 4L11.5 1 14.5 4"}),l.createElement("path",{d:"M20.5 9L23.5 12 20.5 15"}),l.createElement("path",{d:"M3.5 15L0.5 12 3.5 9"}),l.createElement("path",{d:"M14.5 20L11.5 23 8.5 20"}))},i={left:0,top:8},a=function(e){var t=e.onClick,r=l.useContext(n.LocalizationContext),u=r&&r.fullScreen?r.fullScreen.enterFullScreen:"Full screen";return l.createElement(n.Tooltip,{position:n.Position.BottomCenter,target:l.createElement(n.MinimalButton,{onClick:t},l.createElement(o,null)),content:function(){return u},offset:i})};!function(e){e[e.ExitFullScreen=0]="ExitFullScreen",e[e.FullScreenChange=1]="FullScreenChange",e[e.FullScreenElement=2]="FullScreenElement",e[e.FullScreenEnabled=3]="FullScreenEnabled",e[e.RequestFullScreen=4]="RequestFullScreen"}(r||(r={}));var s={ExitFullScreen:"exitFullscreen",FullScreenChange:"fullscreenchange",FullScreenElement:"fullscreenElement",FullScreenEnabled:"fullscreenEnabled",RequestFullScreen:"requestFullscreen"},E={ExitFullScreen:"webkitExitFullscreen",FullScreenChange:"webkitfullscreenchange",FullScreenElement:"webkitFullscreenElement",FullScreenEnabled:"webkitFullscreenEnabled",RequestFullScreen:"webkitRequestFullscreen"},f={ExitFullScreen:"msExitFullscreen",FullScreenChange:"MSFullscreenChange",FullScreenElement:"msFullscreenElement",FullScreenEnabled:"msFullscreenEnabled",RequestFullScreen:"msRequestFullscreen"},m="undefined"!=typeof window,F=m&&(r.FullScreenEnabled in document&&s||E.FullScreenEnabled in document&&E||f.FullScreenEnabled in document&&f)||s,S=function(e){return m?e[F.ExitFullScreen]():Promise.resolve({})},d=function(){return m?document[F.FullScreenElement]:null},b=function(e){var n=e.children,t=e.store,r=e.onEnterFullScreen,u=e.onExitFullScreen,c=l.useRef(t.get("getPagesContainer")?t.get("getPagesContainer")():null),o=function(){var e=d()===c.current;t.update("isFullScreen",e);var n=t.get("zoom");n&&(e?r(n):u(n))},i=function(e){var n;c.current=e(),n=o,m&&document.addEventListener(F.FullScreenChange,n)};l.useEffect((function(){return t.subscribe("getPagesContainer",i),function(){t.unsubscribe("getPagesContainer",i)}}),[]);return(n||function(e){return l.createElement(a,{onClick:e.onClick})})({onClick:function(){var e=c.current;e&&function(){var e=c.current;if(!e)return Promise.resolve();var n=d();return n&&n!==e?S(n):Promise.resolve()}().then((function(){var n;n=e,m&&n[F.RequestFullScreen]()}))}})},g=function(e){var t=e.onClick,r=l.useContext(n.LocalizationContext),u=r&&r.fullScreen?r.fullScreen.enterFullScreen:"Full screen";return l.createElement(n.MenuItem,{icon:l.createElement(o,null),onClick:t},u)},p=function(e){var t=e.store,r=l.useState(!1),c=r[0],o=r[1],i=function(e){o(e)};return l.useEffect((function(){return t.subscribe("isFullScreen",i),function(){t.unsubscribe("isFullScreen",i)}}),[]),l.createElement(l.Fragment,null,c&&l.createElement("div",{className:"rpv-full-screen__exit-button"},l.createElement("div",{className:"rpv-full-screen__exit-button-content"},l.createElement(n.MinimalButton,{onClick:function(){o(!1);var e=t.get("getPagesContainer");if(e){var n=e();if(n){var r=d();r&&r===n&&S(document)}}}},l.createElement(u,null)))))};exports.ExitFullScreenIcon=u,exports.FullScreenIcon=o,exports.fullScreenPlugin=function(e){var t=l.useMemo((function(){return n.createStore({})}),[]),r=e&&e.onEnterFullScreen?e.onEnterFullScreen:function(){},u=e&&e.onExitFullScreen?e.onExitFullScreen:function(){},o=function(e){return l.createElement(b,c({},e,{store:t,onEnterFullScreen:r,onExitFullScreen:u}))},i=function(){return l.createElement(p,{store:t})};return{install:function(e){t.update("getPagesContainer",e.getPagesContainer),t.update("zoom",e.zoom)},renderViewer:function(e){var n=e.slot;return n.subSlot&&(n.subSlot.children=l.createElement(l.Fragment,null,l.createElement(i,null),n.subSlot.children)),n},EnterFullScreen:o,EnterFullScreenButton:function(){return l.createElement(o,null,(function(e){return l.createElement(a,c({},e))}))},EnterFullScreenMenuItem:function(e){return l.createElement(o,null,(function(n){return l.createElement(g,{onClick:function(){n.onClick(),e.onClick()}})}))}}};
