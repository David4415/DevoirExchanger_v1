"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("pdfjs-dist");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r,o=n(e),a=n(t);!function(e){e[e.Text=1]="Text",e[e.Link=2]="Link",e[e.FreeText=3]="FreeText",e[e.Line=4]="Line",e[e.Square=5]="Square",e[e.Circle=6]="Circle",e[e.Polygon=7]="Polygon",e[e.Polyline=8]="Polyline",e[e.Highlight=9]="Highlight",e[e.Underline=10]="Underline",e[e.Squiggly=11]="Squiggly",e[e.StrikeOut=12]="StrikeOut",e[e.Stamp=13]="Stamp",e[e.Caret=14]="Caret",e[e.Ink=15]="Ink",e[e.Popup=16]="Popup",e[e.FileAttachment=17]="FileAttachment"}(r||(r={}));var i,c=r,l=function(e){var t=e.children,n=e.size,r=((void 0===n?24:n)||24)+"px";return o.createElement("svg",{className:"rpv-core__icon",height:r,viewBox:"0 0 24 24",width:r},t)},s=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M23.5,0.499l-16.5,23l-6.5-6.5"}))},p=function(e){var t=[];return Object.keys(e).forEach((function(n){n&&e[n]&&t.push(n)})),t.join(" ")},u=function(e){var t=e.children,n=e.onClick;return o.createElement("button",{className:"rpv-core__primary-button",onClick:n},t)},d=function(){return o.createElement("svg",{className:"rpv-core__spinner",width:"64px",height:"64px",viewBox:"0 0 32 32"},o.createElement("circle",{className:"rpv-core__spinner-circle",cx:"16",cy:"16",r:"12",strokeDasharray:2*Math.PI*9}))},f=function(e){var t=e.placeholder,n=void 0===t?"":t,r=e.type,a=void 0===r?"text":r,i=e.value,c=void 0===i?"":i,l=e.onChange,s=e.onKeyDown,p=void 0===s?function(){}:s;return o.createElement("input",{className:"rpv-core__textbox",placeholder:n,type:a,value:c,onChange:function(e){return l(e.target.value)},onKeyDown:p})},v="undefined"!=typeof window?o.useLayoutEffect:o.useEffect,m=function(e){var t=o.useRef(null),n=e.threshold,r=e.onVisibilityChanged;return v((function(){var e=new IntersectionObserver((function(e){e.forEach((function(e){var t=e.isIntersecting,n=e.intersectionRatio;r({isVisible:t,ratio:n})}))}),{threshold:n||0}),o=t.current;if(o)return e.observe(o),function(){e.unobserve(o)}}),[]),t},g=o.createContext({}),h={core:{askingPassword:{requirePasswordToOpen:"This document requires a password to open",submit:"Submit"},wrongPassword:{submit:"Submit",tryAgain:"The password is wrong. Please try again"}}},E=function(e){var t=e.children,n=e.localization,r=h,a=o.useState(n||r),i=a[0],c=a[1];return o.createElement(g.Provider,{value:i},t((function(e){return c(e)})))},w=function(e,t,n){var r=function(e){var r=t.current;r&&!r.contains(e.target)&&n()};o.useEffect((function(){if(e)return document.addEventListener("click",r),function(){document.removeEventListener("click",r)}}),[])},y=function(e,t){var n=function(n){n.keyCode===e&&t()};o.useEffect((function(){return document.addEventListener("keyup",n),function(){document.removeEventListener("keyup",n)}}),[])},_=function(e){var t=e.children,n=e.closeOnClickOutside,r=e.closeOnEscape,a=e.onToggle,i=o.useRef();return o.useEffect((function(){var e=window.getComputedStyle(document.body).overflow;return document.body.style.overflow="hidden",function(){document.body.style.overflow=e}}),[]),y(27,(function(){return r&&a()})),w(n,i,a),v((function(){var e=i.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight=t+"px")}}),[]),o.createElement("div",{className:"rpv-core__modal-body",ref:i},t)},x=function(e){var t=e.children;return o.createElement("div",{className:"rpv-core__modal-overlay"},t)};!function(e){e.Close="Close",e.Open="Open",e.Toggle="Toggle"}(i||(i={}));var k,b=function(){var e=o.useState(!1),t=e[0],n=e[1];return{opened:t,toggle:function(e){switch(e){case i.Close:n(!1);break;case i.Open:n(!0);break;case i.Toggle:default:n((function(e){return!e}))}}}},P=function(e){var t=e.content,n=e.target,r=b(),a=r.opened,i=r.toggle;return o.createElement(o.Fragment,null,n(i,a),a&&t(i))};!function(e){e.TopLeft="TOP_LEFT",e.TopCenter="TOP_CENTER",e.TopRight="TOP_RIGHT",e.RightTop="RIGHT_TOP",e.RightCenter="RIGHT_CENTER",e.RightBottom="RIGHT_BOTTOM",e.BottomLeft="BOTTOM_LEFT",e.BottomCenter="BOTTOM_CENTER",e.BottomRight="BOTTOM_RIGHT",e.LeftTop="LEFT_TOP",e.LeftCenter="LEFT_CENTER",e.LeftBottom="LEFT_BOTTOM"}(k||(k={}));var C,O=k,L=function(e,t,n,r,o){v((function(){var a=t.current,i=e.current,c=n.current;if(i&&a&&c){var l=c.getBoundingClientRect(),s=function(e,t,n,r){var o=t.getBoundingClientRect(),a=e.getBoundingClientRect(),i=a.height,c=a.width,l=0,s=0;switch(n){case O.TopLeft:l=o.top-i,s=o.left;break;case O.TopCenter:l=o.top-i,s=o.left+o.width/2-c/2;break;case O.TopRight:l=o.top-i,s=o.left+o.width-c;break;case O.RightTop:l=o.top,s=o.left+o.width;break;case O.RightCenter:l=o.top+o.height/2-i/2,s=o.left+o.width;break;case O.RightBottom:l=o.top+o.height-i,s=o.left+o.width;break;case O.BottomLeft:l=o.top+o.height,s=o.left;break;case O.BottomCenter:l=o.top+o.height,s=o.left+o.width/2-c/2;break;case O.BottomRight:l=o.top+o.height,s=o.left+o.width-c;break;case O.LeftTop:l=o.top,s=o.left-c;break;case O.LeftCenter:l=o.top+o.height/2-i/2,s=o.left-c;break;case O.LeftBottom:l=o.top+o.height-i,s=o.left-c}return{left:s+(r.left||0),top:l+(r.top||0)}}(i,a,r,o),p=s.top,u=s.left;i.style.top=p-l.top+"px",i.style.left=u-l.left+"px"}}),[])},R=function(e){var t,n=e.customClassName,r=e.position;return o.createElement("div",{className:p((t={"rpv-core__arrow":!0,"rpv-core__arrow--tl":r===O.TopLeft,"rpv-core__arrow--tc":r===O.TopCenter,"rpv-core__arrow--tr":r===O.TopRight,"rpv-core__arrow--rt":r===O.RightTop,"rpv-core__arrow--rc":r===O.RightCenter,"rpv-core__arrow--rb":r===O.RightBottom,"rpv-core__arrow--bl":r===O.BottomLeft,"rpv-core__arrow--bc":r===O.BottomCenter,"rpv-core__arrow--br":r===O.BottomRight,"rpv-core__arrow--lt":r===O.LeftTop,"rpv-core__arrow--lc":r===O.LeftCenter,"rpv-core__arrow--lb":r===O.LeftBottom},t[""+n]=""!==n,t))})},T=function(e){var t=e.children,n=e.closeOnClickOutside,r=e.offset,a=e.position,i=e.targetRef,c=e.onClose,l=o.useRef(),s=o.useRef(),p=o.useRef();return w(n,l,c),L(l,i,p,a,r),v((function(){var e=s.current;if(e){var t=.75*document.body.clientHeight;e.getBoundingClientRect().height>=t&&(e.style.overflow="auto",e.style.maxHeight=t+"px")}}),[]),o.createElement(o.Fragment,null,o.createElement("div",{ref:p,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:"rpv-core__popover-body",ref:l},o.createElement(R,{customClassName:"rpv-core__popover-body-arrow",position:a}),o.createElement("div",{ref:s},t)))},S=function(e){var t=e.closeOnEscape,n=e.onClose;return y(27,(function(){return t&&n()})),o.createElement("div",{className:"rpv-core__popover-overlay"})},N=function(e){var t=e.children,n=e.offset,r=e.position,a=e.targetRef,i=o.useRef(),c=o.useRef();return L(i,a,c,r,n),o.createElement(o.Fragment,null,o.createElement("div",{ref:c,style:{left:0,position:"absolute",top:0}}),o.createElement("div",{className:"rpv-core__tooltip-body",ref:i},o.createElement(R,{customClassName:"rpv-core__tooltip-body-arrow",position:r}),o.createElement("div",{className:"rpv-core__tooltip-body-content"},t)))};!function(e){e.ActualSize="ActualSize",e.PageFit="PageFit",e.PageWidth="PageWidth"}(C||(C={}));var M=C,H=function(e,t){return(H=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])})(e,t)};
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */function B(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}H(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var F=function(){return(F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};var I,A=o.createContext({currentTheme:"light",setCurrentTheme:function(){}}),D=function(e){var t=e.children,n=e.theme,r=o.useMemo((function(){return"auto"===n?"undefined"!=typeof window&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":n}),[]),a=o.useState(r),i=a[0],c=a[1];o.useEffect((function(){if("auto"===n){var e=window.matchMedia("(prefers-color-scheme: dark)"),t=function(e){c(e.matches?"dark":"light")};return e.addEventListener("change",t),function(){return e.removeEventListener("change",t)}}}),[]);var l={currentTheme:i,setCurrentTheme:c};return o.createElement(A.Provider,{value:l},t)};!function(e){e[e.PreRender=0]="PreRender",e[e.DidRender=1]="DidRender"}(I||(I={}));var W,j=I;!function(e){e[e.Solid=1]="Solid",e[e.Dashed=2]="Dashed",e[e.Beveled=3]="Beveled",e[e.Inset=4]="Inset",e[e.Underline=5]="Underline"}(W||(W={}));var V,z=W,q=new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"),U=function(e,t,n,r){var o=parseInt(e,10);return o>=t&&o<=n?o:r},Z=function(e){var t=e.annotation,n=o.useRef(),r="";if(t.modificationDate){var a=function(e){var t=q.exec(e);if(!t)return null;var n=parseInt(t[1],10),r=U(t[2],1,12,1)-1,o=U(t[3],1,31,1),a=U(t[4],0,23,0),i=U(t[5],0,59,0),c=U(t[6],0,59,0),l=t[7]||"Z",s=U(t[8],0,23,0),p=U(t[9],0,59,0);switch(l){case"-":a+=s,i+=p;break;case"+":a-=s,i-=p}return new Date(Date.UTC(n,r,o,a,i,c))}(t.modificationDate);r=a?a.toLocaleDateString()+", "+a.toLocaleTimeString():""}return o.useLayoutEffect((function(){if(n.current){var e=document.querySelector('[data-annotation-id="'+t.id+'"]');if(e){var r=e;return r.style.zIndex+=1,function(){r.style.zIndex=""+(parseInt(r.style.zIndex,10)-1)}}}}),[]),o.createElement("div",{ref:n,className:"rpv-core__annotation-popup-wrapper",style:{top:t.annotationType===c.Popup?"":"100%"}},t.title&&o.createElement("div",{className:"rpv-core__annotation-popup-header"},o.createElement("div",{className:"rpv-core__annotation-popup-title"},t.title),o.createElement("span",{className:"rpv-core__annotation-popup-date"},r)),t.contents&&o.createElement("div",{className:"rpv-core__annotation-popup-content"},t.contents.split("\n").map((function(e,t){return o.createElement(o.Fragment,{key:t},e,o.createElement("br",null))}))))};!function(e){e.Click="Click",e.Hover="Hover"}(V||(V={}));var G=function(e){var t,n=e.annotation,r=e.children,a=e.ignoreBorder,c=e.hasPopup,l=e.isRenderable,s=e.page,p=e.viewport,u=n.rect,d=function(){var e=b(),t=e.opened,n=e.toggle,r=o.useState(V.Hover),a=r[0],c=r[1];return{opened:t,closeOnHover:function(){a===V.Hover&&n(i.Close)},openOnHover:function(){a===V.Hover&&n(i.Open)},toggleOnClick:function(){switch(a){case V.Click:t&&c(V.Hover),n(i.Toggle);break;case V.Hover:c(V.Click),n(i.Open)}}}}(),f=d.closeOnHover,v=d.opened,m=d.openOnHover,g=d.toggleOnClick,h=(t=[u[0],s.view[3]+s.view[1]-u[1],u[2],s.view[3]+s.view[1]-u[3]],[Math.min(t[0],t[2]),Math.min(t[1],t[3]),Math.max(t[0],t[2]),Math.max(t[1],t[3])]),E=u[2]-u[0],w=u[3]-u[1],y={borderColor:"",borderRadius:"",borderStyle:"",borderWidth:""};if(!a&&n.borderStyle.width>0){switch(n.borderStyle.style){case z.Dashed:y.borderStyle="dashed";break;case z.Solid:y.borderStyle="solid";break;case z.Underline:y=Object.assign({borderBottomStyle:"solid"},y);break;case z.Beveled:case z.Inset:}var _=n.borderStyle.width;y.borderWidth=_+"px",n.borderStyle.style!==z.Underline&&(E-=2*_,w-=2*_);var x=n.borderStyle,k=x.horizontalCornerRadius,P=x.verticalCornerRadius;(k>0||P>0)&&(y.borderRadius=k+"px / "+P+"px"),n.color?y.borderColor="rgb("+(0|n.color[0])+", "+(0|n.color[1])+", "+(0|n.color[2])+")":y.borderWidth="0"}return o.createElement(o.Fragment,null,l&&r({popup:{opened:v,closeOnHover:f,openOnHover:m,toggleOnClick:g},slot:{attrs:{style:Object.assign({height:w+"px",left:h[0]+"px",top:h[1]+"px",transform:"matrix("+p.transform.join(",")+")",transformOrigin:"-"+h[0]+"px -"+h[1]+"px",width:E+"px"},y)},children:o.createElement(o.Fragment,null,c&&v&&o.createElement(Z,{annotation:n}))}}))},J=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--caret","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},K=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--circle","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},o.createElement("circle",{cy:s/2,fill:"none",rx:l/2-p/2,ry:s/2-p/2,stroke:"transparent",strokeWidth:p||1})),e.slot.children)}))},X=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!(!1!==t.hasPopup||!t.title&&!t.contents),i=function(){var e,n,r,o,a=t.file;a&&(e=a.filename,n=a.content,r="string"==typeof n?"":URL.createObjectURL(new Blob([n],{type:""})),(o=document.createElement("a")).style.display="none",o.href=r||e,o.setAttribute("download",function(e){var t=e.split("/").pop();return t?t.split("#")[0].split("?")[0]:e}(e)),document.body.appendChild(o),o.click(),document.body.removeChild(o),r&&URL.revokeObjectURL(r))};return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:!0,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--file-attachment","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onDoubleClick:i,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Y=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--free-text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Q=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!(!t.title&&!t.contents),i=!t.parentType||-1!==["Circle","Ink","Line","Polygon","PolyLine","Square"].indexOf(t.parentType);return v((function(){if(t.parentId){var e=document.querySelector('[data-annotation-id="'+t.parentId+'"]'),n=document.querySelector('[data-annotation-id="'+t.id+'"]');if(e&&n){var r=parseFloat(e.style.left),o=parseFloat(e.style.top)+parseFloat(e.style.height);n.style.left=r+"px",n.style.top=o+"px",n.style.transformOrigin="-"+r+"px -"+o+"px"}}}),[]),o.createElement(G,{annotation:t,hasPopup:i,ignoreBorder:!1,isRenderable:a,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--popup","data-annotation-id":t.id}),o.createElement(Z,{annotation:t}))}))},$=function(e){var t=e.annotation,n=e.childAnnotation,r=e.page,a=e.viewport,i=!1===t.hasPopup,l=!!(t.hasPopup||t.title||t.contents);if(t.quadPoints&&t.quadPoints.length>0){var s=t.quadPoints.map((function(e){return Object.assign({},t,{rect:[e[2].x,e[2].y,e[1].x,e[1].y],quadPoints:[]})}));return o.createElement(o.Fragment,null,s.map((function(e,t){return o.createElement($,{key:t,annotation:e,childAnnotation:n,page:r,viewport:a})})))}return o.createElement(G,{annotation:t,hasPopup:i,ignoreBorder:!0,isRenderable:l,page:r,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--highlight","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children),n&&n.annotationType===c.Popup&&e.popup.opened&&o.createElement(Q,{annotation:n,page:r,viewport:a}))}))},ee=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--ink","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.inkLists&&t.inkLists.length&&o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},t.inkLists.map((function(e,t){return o.createElement("polyline",{key:t,fill:"none",stroke:"transparent",strokeWidth:p||1,points:e.map((function(e){return e.x-c[0]+","+(c[3]-e.y)})).join(" ")})}))),e.slot.children)}))},te=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--line","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},o.createElement("line",{stroke:"transparent",strokeWidth:p||1,x1:c[2]-t.lineCoordinates[0],x2:c[2]-t.lineCoordinates[2],y1:c[3]-t.lineCoordinates[1],y2:c[3]-t.lineCoordinates[3]})),e.slot.children)}))},ne=function(e,t){return new Promise((function(n){new Promise((function(n){"string"==typeof t?e.getDestination(t).then((function(e){n(e)})):n(t)})).then((function(t){return"object"==typeof t[0]?e.getPageIndex(t[0]).then((function(e){return Promise.resolve({pageIndex:e,destArray:t})})):Promise.resolve({pageIndex:t[0],destArray:t})})).then((function(e){var t=function(e,t){switch(t[1].name){case"XYZ":return{bottomOffset:t[3],pageIndex:e-1,scaleTo:t[4]};case"Fit":case"FitB":return{bottomOffset:0,pageIndex:e-1,scaleTo:M.PageFit};case"FitH":case"FitBH":return{bottomOffset:t[2],pageIndex:e-1,scaleTo:M.PageWidth};default:return{bottomOffset:0,pageIndex:e-1,scaleTo:1}}}(e.pageIndex,e.destArray);n(t)}))}))},re=function(e){var t=e.annotation,n=e.doc,r=e.page,a=e.viewport,i=e.onExecuteNamedAction,c=e.onJumpToDest,l=!!(t.url||t.dest||t.action),s=t.url?{href:t.url,rel:"noopener noreferrer nofollow",target:t.newWindow?"_blank":"",title:t.url}:{href:"",onClick:function(e){e.preventDefault(),t.action?i(t.action):ne(n,t.dest).then((function(e){var t=e.pageIndex,n=e.bottomOffset,r=e.scaleTo;c(n?t+1:t,n,0,r)}))}};return o.createElement(G,{annotation:t,hasPopup:!1,ignoreBorder:!1,isRenderable:l,page:r,viewport:a},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--link","data-annotation-id":t.id}),o.createElement("a",F({},s)))}))},oe=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polygon","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},o.createElement("polygon",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return e.x-c[0]+","+(c[3]-e.y)})).join(" ")})),e.slot.children)}))},ae=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--polyline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),t.vertices&&t.vertices.length&&o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},o.createElement("polyline",{fill:"none",stroke:"transparent",strokeWidth:p||1,points:t.vertices.map((function(e){return e.x-c[0]+","+(c[3]-e.y)})).join(" ")})),e.slot.children)}))},ie=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents),c=t.rect,l=c[2]-c[0],s=c[3]-c[1],p=t.borderStyle.width;return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--square","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),o.createElement("svg",{height:s+"px",preserveAspectRatio:"none",version:"1.1",viewBox:"0 0 "+l+" "+s,width:l+"px"},o.createElement("rect",{height:s-p,fill:"none",stroke:"transparent",strokeWidth:p||1,x:p/2,y:p/2,width:l-p})),e.slot.children)}))},ce=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--squiggly","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},le=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--stamp","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},se=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--strike-out","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},pe=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M.5,16.5a1,1,0,0,0,1,1h2v4l4-4h15a1,1,0,0,0,1-1V3.5a1,1,0,0,0-1-1H1.5a1,1,0,0,0-1,1Z"}),o.createElement("path",{d:"M7.25,9.75A.25.25,0,1,1,7,10a.25.25,0,0,1,.25-.25"}),o.createElement("path",{d:"M12,9.75a.25.25,0,1,1-.25.25A.25.25,0,0,1,12,9.75"}),o.createElement("path",{d:"M16.75,9.75a.25.25,0,1,1-.25.25.25.25,0,0,1,.25-.25"}))},ue=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M0.500 12.001 A11.500 11.500 0 1 0 23.500 12.001 A11.500 11.500 0 1 0 0.500 12.001 Z"}),o.createElement("path",{d:"M6.000 12.001 A6.000 6.000 0 1 0 18.000 12.001 A6.000 6.000 0 1 0 6.000 12.001 Z"}),o.createElement("path",{d:"M21.423 5.406L17.415 9.414"}),o.createElement("path",{d:"M14.587 6.585L18.607 2.565"}),o.createElement("path",{d:"M5.405 21.424L9.413 17.416"}),o.createElement("path",{d:"M6.585 14.588L2.577 18.596"}),o.createElement("path",{d:"M18.602 21.419L14.595 17.412"}),o.createElement("path",{d:"M17.419 14.58L21.428 18.589"}),o.createElement("path",{d:"M2.582 5.399L6.588 9.406"}),o.createElement("path",{d:"M9.421 6.581L5.412 2.572"}))},de=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M4.000 18.500 A1.500 1.500 0 1 0 7.000 18.500 A1.500 1.500 0 1 0 4.000 18.500 Z"}),o.createElement("path",{d:"M20.5.5l-9.782,9.783a7,7,0,1,0,3,3L17,10h1.5V8.5L19,8h1.5V6.5L21,6h1.5V4.5l1-1V.5Z"}))},fe=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M2.000 2.500 L22.000 2.500 L22.000 23.500 L2.000 23.500 Z"}),o.createElement("path",{d:"M6 4.5L6 0.5"}),o.createElement("path",{d:"M18 4.5L18 0.5"}),o.createElement("path",{d:"M10 4.5L10 0.5"}),o.createElement("path",{d:"M14 4.5L14 0.5"}))},ve=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M17.5 0.498L17.5 23.498"}),o.createElement("path",{d:"M10.5 0.498L10.5 23.498"}),o.createElement("path",{d:"M23.5.5H6.5a6,6,0,0,0,0,12h4"}))},me=function(){return o.createElement(l,{size:16},o.createElement("path",{d:"M2.5 22.995L12 6.005 21.5 22.995 2.5 22.995z"}))},ge=function(e){var t=e.annotation,n=e.childAnnotation,r=e.page,a=e.viewport,i=!1===t.hasPopup,l=!!(t.hasPopup||t.title||t.contents),p=t.name?t.name.toLowerCase():"";return o.createElement(G,{annotation:t,hasPopup:i,ignoreBorder:!1,isRenderable:l,page:r,viewport:a},(function(e){return o.createElement(o.Fragment,null,o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--text","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),p&&o.createElement("div",{className:"rpv-core__annotation-text-icon"},"check"===p&&o.createElement(s,null),"comment"===p&&o.createElement(pe,null),"help"===p&&o.createElement(ue,null),"insert"===p&&o.createElement(me,null),"key"===p&&o.createElement(de,null),"note"===p&&o.createElement(fe,null),("newparagraph"===p||"paragraph"===p)&&o.createElement(ve,null)),e.slot.children),n&&n.annotationType===c.Popup&&e.popup.opened&&o.createElement(Q,{annotation:n,page:r,viewport:a}))}))},he=function(e){var t=e.annotation,n=e.page,r=e.viewport,a=!1===t.hasPopup,i=!!(t.hasPopup||t.title||t.contents);return o.createElement(G,{annotation:t,hasPopup:a,ignoreBorder:!0,isRenderable:i,page:n,viewport:r},(function(e){return o.createElement("div",F({},e.slot.attrs,{className:"rpv-core__annotation rpv-core__annotation--underline","data-annotation-id":t.id,onClick:e.popup.toggleOnClick,onMouseEnter:e.popup.openOnHover,onMouseLeave:e.popup.closeOnHover}),e.slot.children)}))},Ee=function(e){var t=e.annotations,n=e.containerRef,r=e.doc,a=e.page,i=e.pageIndex,l=e.plugins,s=e.rotation,p=e.scale,u=e.onExecuteNamedAction,d=e.onJumpToDest,f=a.getViewport({rotation:s,scale:p}).clone({dontFlip:!0}),v=t.filter((function(e){return!e.parentId}));return o.useEffect((function(){var e=n.current;e&&l.forEach((function(t){t.onAnnotationLayerRender&&t.onAnnotationLayerRender({annotations:v,container:e,pageIndex:i,rotation:s,scale:p})}))}),[]),o.createElement(o.Fragment,null,v.map((function(e){var n=t.find((function(t){return t.parentId===e.id}));switch(e.annotationType){case c.Caret:return o.createElement(J,{key:e.id,annotation:e,page:a,viewport:f});case c.Circle:return o.createElement(K,{key:e.id,annotation:e,page:a,viewport:f});case c.FileAttachment:return o.createElement(X,{key:e.id,annotation:e,page:a,viewport:f});case c.FreeText:return o.createElement(Y,{key:e.id,annotation:e,page:a,viewport:f});case c.Highlight:return o.createElement($,{key:e.id,annotation:e,childAnnotation:n,page:a,viewport:f});case c.Ink:return o.createElement(ee,{key:e.id,annotation:e,page:a,viewport:f});case c.Line:return o.createElement(te,{key:e.id,annotation:e,page:a,viewport:f});case c.Link:return o.createElement(re,{key:e.id,annotation:e,doc:r,page:a,viewport:f,onExecuteNamedAction:u,onJumpToDest:d});case c.Polygon:return o.createElement(oe,{key:e.id,annotation:e,page:a,viewport:f});case c.Polyline:return o.createElement(ae,{key:e.id,annotation:e,page:a,viewport:f});case c.Popup:return o.createElement(Q,{key:e.id,annotation:e,page:a,viewport:f});case c.Square:return o.createElement(ie,{key:e.id,annotation:e,page:a,viewport:f});case c.Squiggly:return o.createElement(ce,{key:e.id,annotation:e,page:a,viewport:f});case c.Stamp:return o.createElement(le,{key:e.id,annotation:e,page:a,viewport:f});case c.StrikeOut:return o.createElement(se,{key:e.id,annotation:e,page:a,viewport:f});case c.Text:return o.createElement(ge,{key:e.id,annotation:e,childAnnotation:n,page:a,viewport:f});case c.Underline:return o.createElement(he,{key:e.id,annotation:e,page:a,viewport:f});default:return o.createElement(o.Fragment,{key:e.id})}})))},we=function(e){var t=e.page,n=e.renderAnnotations,r=o.useState({loading:!0,annotations:[]}),a=r[0],i=r[1];return o.useEffect((function(){t.getAnnotations({intent:"display"}).then((function(e){i({loading:!1,annotations:e})}))}),[]),a.loading?o.createElement(o.Fragment,null):n(a.annotations)},ye=function(e){var t=e.doc,n=e.page,r=e.pageIndex,a=e.plugins,i=e.rotation,c=e.scale,l=e.onExecuteNamedAction,s=e.onJumpToDest,p=o.useRef();return o.createElement("div",{ref:p,className:"rpv-core__annotation-layer"},o.createElement(we,{page:n,renderAnnotations:function(e){return o.createElement(Ee,{annotations:e,containerRef:p,doc:t,page:n,pageIndex:r,plugins:a,rotation:i,scale:c,onExecuteNamedAction:l,onJumpToDest:s})}}))},_e=function(e){var t=e.callback,n=e.children,r=e.rotation,a=e.scale;return v((function(){t()}),[r,a]),o.createElement(o.Fragment,null,n)},xe=function(e){var t=e.height,n=e.page,r=e.pageIndex,a=e.plugins,i=e.rotation,c=e.scale,l=e.width,s=o.useRef(),p=o.useRef(),u=o.useState(!1),f=u[0],v=u[1],m=window.devicePixelRatio||1;return o.createElement(_e,{callback:function(){v(!1);var e=p.current;e&&e.cancel();var o=s.current;a.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:o,pageIndex:r,rotation:i,scale:c,status:j.PreRender})})),o.height=t*m,o.width=l*m,o.style.opacity="0";var u=o.getContext("2d",{alpha:!1}),d=n.getViewport({rotation:i,scale:c*m});p.current=n.render({canvasContext:u,viewport:d}),p.current.promise.then((function(){v(!0),o.style.removeProperty("opacity"),a.forEach((function(e){e.onCanvasLayerRender&&e.onCanvasLayerRender({ele:o,pageIndex:r,rotation:i,scale:c,status:j.DidRender})}))}),(function(){v(!0)}))},rotation:i,scale:c},o.createElement("div",{className:"rpv-core__canvas-layer",style:{height:t+"px",width:l+"px"}},!f&&o.createElement("div",{className:"rpv-core__canvas-layer-loader"},o.createElement(d,null)),o.createElement("canvas",{ref:s,style:{transform:"scale("+1/m+")",transformOrigin:"top left"}})))},ke=function(e){var t=e.height,n=e.page,r=e.rotation,i=e.scale,c=e.width,l=o.useRef();return o.createElement(_e,{callback:function(){var e=l.current,o=n.getViewport({rotation:r,scale:i});n.getOperatorList().then((function(r){!function(){var e=l.current;e&&(e.innerHTML="")}(),new a.SVGGraphics(n.commonObjs,n.objs).getSVG(r,o).then((function(n){n.style.height=t+"px",n.style.width=c+"px",e.appendChild(n)}))}))},rotation:r,scale:i},o.createElement("div",{className:"rpv-core__svg-layer",ref:l}))},be=function(e){var t=e.page,n=e.pageIndex,r=e.plugins,i=e.rotation,c=e.scale,l=o.useRef(),s=o.useRef();return o.createElement(_e,{callback:function(){var e=s.current;e&&e.cancel();var o=l.current;if(o){var p=t.getViewport({rotation:i,scale:c});r.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:n,scale:c,status:j.PreRender})})),t.getTextContent().then((function(e){!function(){var e=l.current;if(e)for(var t=e.querySelectorAll("span.rpv-core__text-layer-text"),n=t.length,r=0;r<n;r++){var o=t[r];e.removeChild(o)}}(),s.current=a.renderTextLayer({container:o,textContent:e,viewport:p,enhanceTextSelection:!0}),s.current.promise.then((function(){for(var e=o.childNodes,t=e.length,a=0;a<t;a++){e[a].classList.add("rpv-core__text-layer-text")}r.forEach((function(e){e.onTextLayerRender&&e.onTextLayerRender({ele:o,pageIndex:n,scale:c,status:j.DidRender})}))}),(function(){}))}))}},rotation:i,scale:c},o.createElement("div",{className:"rpv-core__text-layer",ref:l}))},Pe=function(e){var t=e.currentPage,n=e.doc,r=e.height,a=e.pageIndex,i=e.plugins,c=e.renderPage,l=e.rotation,s=e.scale,p=e.width,u=e.onExecuteNamedAction,f=e.onJumpToDest,v=e.onPageVisibilityChanged,g=o.useState({page:null,pageHeight:r,pageWidth:p,viewportRotation:0}),h=g[0],E=g[1],w=h.page,y=h.pageHeight,_=h.pageWidth,x=o.useRef(!1),k=Array(10).fill(null).map((function(e,t){return t/10})),b=_*s,P=y*s,C=Math.abs(l)%180==0,O=C?b:P,L=C?P:b,R=function(){x.current||(x.current=!0,n.getPage(a+1).then((function(e){var t=e.getViewport({scale:1});E({page:e,pageHeight:t.height,pageWidth:t.width,viewportRotation:t.rotation})})))},T=c||function(e){return o.createElement(o.Fragment,null,e.canvasLayer.children,e.textLayer.children,e.annotationLayer.children)},S=(l+h.viewportRotation)%360,N=m({threshold:k,onVisibilityChanged:function(e){v(a,e.isVisible?e.ratio:-1),e.isVisible&&R()}});return o.useEffect((function(){t-2<=a&&a<=t+2&&R()}),[t]),o.createElement("div",{ref:N,className:"rpv-core__page-layer","data-testid":"viewer-page-layer-"+a,style:{height:L+"px",width:O+"px"}},w?o.createElement(o.Fragment,null,T({annotationLayer:{attrs:{},children:o.createElement(ye,{doc:n,page:w,pageIndex:a,plugins:i,rotation:S,scale:s,onExecuteNamedAction:u,onJumpToDest:f})},canvasLayer:{attrs:{},children:o.createElement(xe,{height:L,page:w,pageIndex:a,plugins:i,rotation:S,scale:s,width:O})},doc:n,height:L,pageIndex:a,rotation:l,scale:s,svgLayer:{attrs:{},children:o.createElement(ke,{height:L,page:w,rotation:S,scale:s,width:O})},textLayer:{attrs:{},children:o.createElement(be,{page:w,pageIndex:a,plugins:i,rotation:S,scale:s})},width:O}),i.map((function(e,t){return e.renderPageLayer?o.createElement(o.Fragment,{key:t},e.renderPageLayer({doc:n,height:L,pageIndex:a,rotation:l,scale:s,width:O})):o.createElement(o.Fragment,{key:t})}))):o.createElement(d,null))},Ce=function(e,t,n,r){switch(r){case M.ActualSize:return 1;case M.PageFit:return Math.min((e.clientWidth-17)/n,(e.clientHeight-16)/t);case M.PageWidth:return(e.clientWidth-17)/n}},Oe=function(e){var t=e.doc,n=e.initialPage,r=e.pageSize,a=e.plugins,i=e.renderPage,c=e.viewerState,l=e.onDocumentLoad,s=e.onOpenFile,p=e.onPageChange,u=e.onZoom,d=o.useRef(null),f=o.useRef(null),v=o.useState(0),m=v[0],g=v[1],h=o.useState(0),E=h[0],w=h[1],y=o.useRef(c),_=o.useState(r.scale),x=_[0],k=_[1],b=t.numPages,P=r.pageWidth,C=r.pageHeight,O=Array(b).fill(null),L=O.map((function(){return 0})),R=O.map((function(){return o.useRef()})),T=function(e){var t=e;a.forEach((function(e){e.onViewerStateChange&&(t=e.onViewerStateChange(t))})),y.current=t},S=function(){return f.current},N=function(e){return e<0||e>=b?null:R[e].current},H=function(){return y.current},B=function(e,n,r,o){var a=f.current,i=y.current;if(a&&i){var c=e+1;t.getPage(c).then((function(t){var c=t.getViewport({scale:1}),l=0,s=n||0,p=r||0,u=i.scale;switch(o){case M.PageFit:l=0,p=0,W(M.PageFit);break;case M.PageWidth:u=Ce(a,C,P,M.PageWidth),l=(c.height-s)*u,p*=u,W(u);break;default:l=(c.height-s)*i.scale,p*=i.scale}var d=R[e].current;d&&(a.scrollTop=d.offsetTop+l,a.scrollLeft=d.offsetLeft+p)}))}},I=function(e){if(!(e<0||e>=b)){var t=f.current,n=R[e].current;t&&n&&(t.scrollTop=n.offsetTop,t.scrollLeft=n.offsetLeft),g(e)}},A=function(e){var t,n;"pdf"===(t=e.name,n=t.split(/\./).pop(),n?n.toLowerCase():"").toLowerCase()&&new Promise((function(t){var n=new FileReader;n.readAsArrayBuffer(e),n.onload=function(){var e=new Uint8Array(n.result);t(e)}})).then((function(t){s(e.name,t)}))},D=function(e){w(e),T({file:c.file,pageIndex:m,pageHeight:C,pageWidth:P,rotation:e,scale:x})},W=function(e){var n=f.current,r=n?"string"==typeof e?Ce(n,C,P,e):e:1;k(r),u({doc:t,scale:r})};o.useEffect((function(){var e=f.current,t=y.current;e&&t&&(e.scrollTop=e.scrollTop*x/t.scale,e.scrollLeft=e.scrollLeft*x/t.scale,T({file:c.file,pageIndex:t.pageIndex,pageHeight:C,pageWidth:P,rotation:E,scale:x}))}),[x]);o.useEffect((function(){var e={getPageElement:N,getPagesContainer:S,getViewerState:H,jumpToDestination:B,jumpToPage:I,openFile:A,rotate:D,setViewerState:T,zoom:W};return a.forEach((function(t){t.install&&t.install(e)})),function(){a.forEach((function(t){t.uninstall&&t.uninstall(e)}))}}),[]),o.useEffect((function(){l({doc:t}),a.forEach((function(e){e.onDocumentLoad&&e.onDocumentLoad({doc:t})})),n&&I(n)}),[]),o.useEffect((function(){p({currentPage:m,doc:t}),T({file:c.file,pageIndex:m,pageHeight:C,pageWidth:P,rotation:E,scale:x})}),[m]);var j,V=function(e,t){L[e]=t;var n=L.reduce((function(e,t,n,r){return t>r[e]?n:e}),0);g(n)},z=function(e){var t=m-1,n=m+1;switch(e){case"FirstPage":I(0);break;case"LastPage":I(b-1);break;case"NextPage":n<b&&I(n);break;case"PrevPage":t>=0&&I(t)}},q=function(e){return o.createElement("div",F({},e.attrs,{style:e.attrs&&e.attrs.style?e.attrs.style:{}}),e.children,e.subSlot&&q(e.subSlot))};return q((j={attrs:{ref:d,style:{height:"100%"}},children:o.createElement(o.Fragment,null),subSlot:{attrs:{ref:f,style:{height:"100%",overflow:"auto",position:"relative"}},children:o.createElement(o.Fragment,null,Array(b).fill(0).map((function(e,n){return o.createElement("div",{className:"rpv-core__inner-page",key:"pagelayer-"+n,ref:function(e){R[n].current=e}},o.createElement(Pe,{currentPage:m,doc:t,height:C,pageIndex:n,plugins:a,renderPage:i,rotation:E,scale:x,width:P,onExecuteNamedAction:z,onJumpToDest:B,onPageVisibilityChanged:V}))})))}},a.forEach((function(e){e.renderViewer&&(j=e.renderViewer({containerRef:d,doc:t,pageHeight:C,pageWidth:P,rotation:E,slot:j,jumpToPage:I,openFile:A,rotate:D,zoom:W}))})),j))},Le=[.1,.2,.3,.4,.5,.6,.7,.8,.9,1,1.1,1.3,1.5,1.7,1.9,2.1,2.4,2.7,3,3.3,3.7,4.1,4.6,5.1,5.7,6.3,7,7.7,8.5,9.4,10],Re=function(e){var t=e.defaultScale,n=e.doc,r=e.render,a=o.useRef(null),i=o.useState({pageHeight:0,pageWidth:0,scale:1}),c=i[0],l=i[1];return o.useEffect((function(){n.getPage(1).then((function(e){var n=e.getViewport({scale:1}),r=n.width,o=n.height,i=a.current;if(i){var c,s,p=(i.clientWidth-100)/r,u=t?"string"==typeof t?Ce(i,o,r,t):t:(c=p,-1===(s=Le.findIndex((function(e){return e>=c})))||0===s?c:Le[s-1]);l({pageHeight:o,pageWidth:r,scale:u})}}))}),[n]),0===c.pageWidth?o.createElement("div",{className:"rpv-core__page-size-calculator",ref:a},o.createElement(d,null)):r(c)},Te=function(){},Se=function(e){function t(t){var n=e.call(this)||this;return n.verifyPasswordFn=t,n}return B(t,e),t}(Te),Ne=function(e){var t=e.verifyPasswordFn,n=o.useContext(g),r=o.useState(""),a=r[0],i=r[1];return o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:"rpv-core__asking-password"},o.createElement("div",{className:"rpv-core__asking-password-message"},n.core.askingPassword.requirePasswordToOpen,":"),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:"rpv-core__asking-password-input"},o.createElement(f,{type:"password",value:a,onChange:i})),o.createElement(u,{onClick:function(){return t(a)}},n.core.askingPassword.submit))))},Me=function(e){function t(t){var n=e.call(this)||this;return n.doc=t,n}return B(t,e),t}(Te),He=function(e){function t(t){var n=e.call(this)||this;return n.error=t,n}return B(t,e),t}(Te),Be=function(e){function t(t){var n=e.call(this)||this;return n.percentages=t,n}return B(t,e),t}(Te),Fe=function(e){var t=e.verifyPasswordFn,n=o.useContext(g),r=o.useState(""),a=r[0],i=r[1];return o.createElement("div",{className:"rpv-core__asking-password-wrapper"},o.createElement("div",{className:"rpv-core__asking-password"},o.createElement("div",{className:"rpv-core__asking-password-message"},n.core.wrongPassword.tryAgain,":"),o.createElement("div",{className:"rpv-core__asking-password-body"},o.createElement("div",{className:"rpv-core__asking-password-input"},o.createElement(f,{type:"password",value:a,onChange:i})),o.createElement("button",{className:"rpv-core__asking-password-button",onClick:function(){return t(a)}},n.core.wrongPassword.submit))))},Ie=function(e){function t(t){var n=e.call(this)||this;return n.verifyPasswordFn=t,n}return B(t,e),t}(Te),Ae=function(e){var t,n=e.characterMap,r=e.file,i=e.httpHeaders,c=e.render,l=e.renderError,s=e.renderLoader,p=e.transformGetDocumentParams,u=e.withCredentials,f=o.useState(new Be(0)),v=f[0],m=f[1],g=o.useState(0),h=g[0],E=g[1],w=o.useState(null),y=w[0],_=w[1],x=(t=o.useRef(!1),o.useEffect((function(){return t.current=!0,function(){t.current=!1}}),[]),t);switch(o.useEffect((function(){m(new Be(0));var e=new a.PDFWorker({name:"PDFWorker_"+Date.now()}),t=Object.assign({httpHeaders:i,withCredentials:u,worker:e},"string"==typeof r?{url:r}:{data:r},n?{cMapUrl:n.url,cMapPacked:n.isCompressed}:{}),o=p?p(t):t,c=a.getDocument(o);return c.onPassword=function(e,t){switch(t){case a.PasswordResponses.NEED_PASSWORD:x.current&&m(new Se(e));break;case a.PasswordResponses.INCORRECT_PASSWORD:x.current&&m(new Ie(e))}},c.onProgress=function(e){e.total>0?x.current&&E(Math.min(100,100*e.loaded/e.total)):x.current&&E(100)},c.promise.then((function(e){return x.current&&_(e)}),(function(t){return x.current&&!e.destroyed&&m(new He({message:t.message||"Cannot load document",name:t.name}))})),function(){c.destroy(),e.destroy()}}),[r]),o.useEffect((function(){100===h&&y?x.current&&m(new Me(y)):x.current&&m(new Be(h))}),[h,y]),!0){case v instanceof Se:return o.createElement(Ne,{verifyPasswordFn:v.verifyPasswordFn});case v instanceof Ie:return o.createElement(Fe,{verifyPasswordFn:v.verifyPasswordFn});case v instanceof Me:return c(v.doc);case v instanceof He:return l?l(v.error):o.createElement("div",{className:"rpv-core__doc-error"},o.createElement("div",{className:"rpv-core__doc-error-text"},v.error.message));case v instanceof Be:return o.createElement("div",{className:"rpv-core__doc-loading"},s?s(v.percentages):o.createElement(d,null));default:return o.createElement("div",{className:"rpv-core__doc-loading"},o.createElement(d,null))}};exports.AnnotationType=c,exports.Button=function(e){var t=e.children,n=e.onClick;return o.createElement("button",{className:"rpv-core__button",onClick:n},t)},exports.Icon=l,exports.LayerRenderStatus=j,exports.LocalizationContext=g,exports.LocalizationProvider=E,exports.Menu=function(e){var t=e.children;return o.createElement("ul",{className:"rpv-core__menu"},t)},exports.MenuDivider=function(){return o.createElement("li",{className:"rpv-core__menu-divider"})},exports.MenuItem=function(e){var t=e.checked,n=void 0!==t&&t,r=e.children,a=e.icon,i=void 0===a?null:a,c=e.isDisabled,l=void 0!==c&&c,u=e.onClick;return o.createElement("li",{className:p({"rpv-core__menu-item":!0,"rpv-core__menu-item--disabled":l}),onClick:u},o.createElement("div",{className:"rpv-core__menu-item-icon"},i),o.createElement("div",{className:"rpv-core__menu-item-label"},r),o.createElement("div",{className:"rpv-core__menu-item-check"},n&&o.createElement(s,null)))},exports.MinimalButton=function(e){var t=e.children,n=e.isDisabled,r=void 0!==n&&n,a=e.isSelected,i=void 0!==a&&a,c=e.onClick;return o.createElement("button",{className:p({"rpv-core__minimal-button":!0,"rpv-core__minimal-button--disabled":r,"rpv-core__minimal-button--selected":i}),onClick:c},t)},exports.Modal=function(e){var t=e.closeOnClickOutside,n=e.closeOnEscape,r=e.content,a=e.target;return o.createElement(P,{target:a,content:function(e){return o.createElement(x,null,o.createElement(_,{closeOnClickOutside:t,closeOnEscape:n,onToggle:e},r(e)))}})},exports.Popover=function(e){var t=e.closeOnClickOutside,n=e.closeOnEscape,r=e.content,a=e.offset,i=e.position,c=e.target,l=o.useRef();return o.createElement(P,{content:function(e){return o.createElement(o.Fragment,null,o.createElement(S,{closeOnEscape:n,onClose:e}),o.createElement(T,{closeOnClickOutside:t,offset:a,position:i,targetRef:l,onClose:e},r(e)))},target:function(e,t){return o.createElement("div",{ref:l},c(e,t))}})},exports.Position=O,exports.PrimaryButton=u,exports.ProgressBar=function(e){var t=e.progress;return o.createElement("div",{className:"rpv-core__progress-bar"},o.createElement("div",{className:"rpv-core__progress-bar-progress",style:{width:t+"%"}},t,"%"))},exports.Separator=function(){return o.createElement("div",{className:"rpv-core__separator"})},exports.SpecialZoomLevel=M,exports.Spinner=d,exports.TextBox=f,exports.ThemeContext=A,exports.ThemeProvider=D,exports.Tooltip=function(e){var t=e.content,n=e.offset,r=e.position,a=e.target,c=o.useRef();return o.createElement(P,{target:function(e){return o.createElement("div",{ref:c,onMouseEnter:function(){e(i.Open)},onMouseLeave:function(){e(i.Close)}},a)},content:function(){return o.createElement(N,{offset:n,position:r,targetRef:c},t())}})},exports.Viewer=function(e){var t,n,r=e.characterMap,a=e.defaultScale,i=e.fileUrl,c=e.httpHeaders,l=void 0===c?{}:c,s=e.initialPage,p=void 0===s?0:s,u=e.localization,d=e.plugins,f=void 0===d?[]:d,v=e.renderError,g=e.renderPage,h=e.renderLoader,w=e.transformGetDocumentParams,y=e.theme,_=void 0===y?"light":y,x=e.withCredentials,k=void 0!==x&&x,b=e.onDocumentLoad,P=void 0===b?function(){}:b,C=e.onPageChange,O=void 0===C?function(){}:C,L=e.onZoom,R=void 0===L?function(){}:L,T=o.useState({data:i,name:"string"==typeof i?i:"",shouldLoad:!1}),S=T[0],N=T[1],M=function(e,t){N({data:t,name:e,shouldLoad:!0})},H=o.useState(!1),B=H[0],F=H[1],I=(t=S,n=o.useRef(t),o.useEffect((function(){n.current=t}),[t]),n.current);o.useEffect((function(){var e,t,n,r;e=I.data,r=typeof(t=i),"string"===(n=typeof e)&&"string"===r&&e===t||"object"===n&&"object"===r&&e.length===t.length&&e.every((function(e,n){return e===t[n]}))||N({data:i,name:"string"==typeof i?i:"",shouldLoad:B})}),[i,B]);var W=m({onVisibilityChanged:function(e){F(e.isVisible),e.isVisible&&N((function(e){return Object.assign({},e,{shouldLoad:!0})}))}});return o.createElement(D,{theme:_},o.createElement(E,{localization:u},(function(e){var t=o.useContext(A);return o.createElement("div",{ref:W,className:"rpv-core__viewer rpv-core__viewer--"+t.currentTheme,"data-testid":"viewer",style:{height:"100%",width:"100%"}},S.shouldLoad&&o.createElement(Ae,{characterMap:r,file:S.data,httpHeaders:l,render:function(e){return o.createElement(Re,{defaultScale:a,doc:e,render:function(t){return o.createElement(Oe,{doc:e,initialPage:p,pageSize:t,plugins:f,renderPage:g,viewerState:{file:S,pageIndex:p,pageHeight:t.pageHeight,pageWidth:t.pageWidth,rotation:0,scale:t.scale},onDocumentLoad:P,onOpenFile:M,onPageChange:O,onZoom:R})}})},renderError:v,renderLoader:h,transformGetDocumentParams:w,withCredentials:k}))})))},exports.Worker=function(e){var t=e.children,n=e.workerUrl;return a.GlobalWorkerOptions.workerSrc=n,o.createElement(o.Fragment,null,t)},exports.createStore=function(e){var t=e||{},n={};return{subscribe:function(e,t){n[e]=(n[e]||[]).concat(t)},unsubscribe:function(e,t){n[e]=(n[e]||[]).filter((function(e){return e!==t}))},update:function(e,r){var o;t=F(F({},t),((o={})[e]=r,o)),(n[e]||[]).forEach((function(n){return n(t[e])}))},get:function(e){return t[e]}}},exports.getDestination=ne,exports.useIntersectionObserver=m,exports.useIsomorphicLayoutEffect=v;
