"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),t=require("@react-pdf-viewer/core");function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var o=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,o.get?o:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var o=n(e),r=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M9.248,17.572a.5.5,0,0,1-.748-.434V6.862a.5.5,0,0,1,.748-.434l8.992,5.138a.5.5,0,0,1,0,.868Z"}))},a=function(e){var t=e.bookmark,n=e.depth,a=e.doc,i=e.onClick,u=e.onJumpToDest,s=o.useRef(),l=o.useRef(),m=o.useRef(!0),d=t.items&&t.items.length>0;return o.createElement(o.Fragment,null,o.createElement("div",{className:"rpv-bookmark__item",style:{paddingLeft:20*n+4+"px"},onClick:function(){!d&&t.dest&&i(t.dest)}},d&&o.createElement("span",{ref:s,className:"rpv-bookmark__toggle",onClick:function(){m.current=!m.current;var e=l.current,t=s.current;e&&t&&(e.style.display=m.current?"block":"none",t.classList.toggle("rpv-bookmark__toggle--expanded"))}},o.createElement(r,null)),t.url?o.createElement("a",{className:"rpv-bookmark__title",href:t.url,rel:"noopener noreferrer nofollow",target:t.newWindow?"_blank":""},t.title):o.createElement("div",{className:"rpv-bookmark__title",onClick:function(){d&&t.dest&&i(t.dest)}},t.title)),d&&o.createElement("div",{ref:l},o.createElement(c,{bookmarks:t.items,depth:n+1,doc:a,onJumpToDest:u})))},c=function(e){var n=e.bookmarks,r=e.depth,c=void 0===r?0:r,i=e.doc,u=e.onJumpToDest,s=function(e){t.getDestination(i,e).then((function(e){var t=e.pageIndex,n=e.bottomOffset,o=e.scaleTo;u(t+1,n,o)}))};return o.createElement("ul",{className:"rpv-bookmark__list"},n.map((function(e,t){return o.createElement("li",{key:t},o.createElement(a,{bookmark:e,depth:c,doc:i,onClick:s,onJumpToDest:u}))})))},i=function(e){var n=e.doc,r=e.onJumpToDest,a=o.useContext(t.LocalizationContext),i=o.useState({isLoaded:!1,items:[]}),u=i[0],s=i[1];return o.useEffect((function(){s({isLoaded:!1,items:[]}),n.getOutline().then((function(e){s({isLoaded:!0,items:e||[]})}))}),[n]),u.isLoaded?0===u.items.length?o.createElement("div",{className:"rpv-bookmark__empty"},a&&a.bookmark?a.bookmark.noBookmark:"There is no bookmark"):o.createElement("div",{className:"rpv-bookmark__container"},o.createElement(c,{bookmarks:u.items,depth:0,doc:n,onJumpToDest:r})):o.createElement(t.Spinner,null)},u=function(e){var n=e.store,r=o.useState(n.get("doc")),a=r[0],c=r[1],u=function(e){c(e)};return o.useEffect((function(){return n.subscribe("doc",u),function(){n.unsubscribe("doc",u)}}),[]),a?o.createElement(i,{doc:a,onJumpToDest:function(e,t,o){var r=n.get("jumpToDestination");r&&r(e,t,0,o)}}):o.createElement("div",{className:"rpv-bookmark__loader"},o.createElement(t.Spinner,null))};exports.DownArrowIcon=function(){return o.createElement(t.Icon,{size:16},o.createElement("path",{d:"M6.427,8.245A.5.5,0,0,1,6.862,7.5H17.138a.5.5,0,0,1,.435.749l-5.139,9a.5.5,0,0,1-.868,0Z"}))},exports.RightArrowIcon=r,exports.bookmarkPlugin=function(){var e=o.useMemo((function(){return t.createStore({})}),[]);return{install:function(t){e.update("jumpToDestination",t.jumpToDestination)},onDocumentLoad:function(t){e.update("doc",t.doc)},Bookmarks:function(){return o.createElement(u,{store:e})}}};
