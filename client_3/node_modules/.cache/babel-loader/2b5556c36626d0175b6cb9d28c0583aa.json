{"ast":null,"code":"import _classCallCheck from\"/Users/Programmation/Documents/Hubrium v_2/client_3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/Programmation/Documents/Hubrium v_2/client_3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/Users/Programmation/Documents/Hubrium v_2/client_3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/Users/Programmation/Documents/Hubrium v_2/client_3/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import _ from'lodash';import{connect}from'react-redux';import history from'../../../history';import{menuChange,getCourses}from'../../../actions';import QueryButton from'./QueryButton';import eye_icon from'../../eye_logo.png';import like_icon from'../../like.jpeg';import stats from'../../stats.png';import search_icon from'../../Header/header_image/search.png';import'./Search.scss';import GoogleAuth from'../../GoogleAuth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Search=/*#__PURE__*/function(_React$Component){_inherits(Search,_React$Component);var _super=_createSuper(Search);function Search(props){var _this;_classCallCheck(this,Search);_this=_super.call(this,props);_this.state={elementList:[],search:\"\"};_this.onSearchButtonClick=function(e){_this.onElementClick(\"SEARCH_\".concat(_this.myRef.current.value));_this.myRef.current.blur();};_this.onElementClick=function(elemList){if(typeof elemList!==\"string\"){// When change the list of queries\n_this.setState({elementList:elemList});_this.props.getCourses(elemList,_this.state.search);}else{// When change text in Search area\n_this.setState({search:elemList.slice(7)});_this.props.getCourses(_this.state.elementList,elemList.slice(7));}};_this.onStatsClick=function(coursId,e){console.log(\"See stats of \",coursId);e.stopPropagation();};_this.renderList=function(){return _this.props.courses.map(function(cours){var date=new Date(cours.dateCreated);return/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_courseItem\",onClick:function onClick(){return history.push(\"/course/see/\".concat(cours.id,\"?creator=\").concat(cours.creator));},style:cours.creator===_this.props.userId?{backgroundColor:\"#FB00A060\"}:{},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_title\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_extremLeft\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_h3_type\",children:[/*#__PURE__*/_jsx(\"h3\",{children:cours.matiere}),/*#__PURE__*/_jsx(\"span\",{children:cours.type})]}),/*#__PURE__*/_jsx(\"img\",{src:cours.image,height:\"80px\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_courseItem_left search\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"search_title\",children:[/*#__PURE__*/_jsx(\"h3\",{children:cours.titleDoc}),\" \",cours.creator===_this.props.userId?/*#__PURE__*/_jsx(\"img\",{onClick:function onClick(e){return _this.onStatsClick(cours.id,e);},src:stats,width:\"25px\",height:\"25px\"}):\"\"]}),/*#__PURE__*/_jsx(\"p\",{className:\"search_description\",children:cours.description}),/*#__PURE__*/_jsxs(\"div\",{className:\"search_belowDescription\",children:[/*#__PURE__*/_jsxs(\"span\",{style:{textDecoration:\"underline\"},children:[\"Created by \",/*#__PURE__*/_jsx(\"strong\",{children:/*#__PURE__*/_jsx(\"span\",{children:cours.userName})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"stats_profile_courseItem_tags\",children:cours.tags.split(\"#\").slice(1,4).map(function(tag){return/*#__PURE__*/_jsx(\"span\",{children:'#'+tag},tag);})})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stats_profile_courseItem_right search\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"Updated\",/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"strong\",{children:date.toLocaleDateString(\"fr\",{day:'numeric',month:'long',year:'numeric'})})]}),/*#__PURE__*/_jsxs(\"div\",{children:[cours.viewed,\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"img\",{src:eye_icon,width:\"20px\",height:\"10px\"})]}),/*#__PURE__*/_jsxs(\"div\",{children:[cours.liked,\"\\xA0\\xA0\",/*#__PURE__*/_jsx(\"img\",{src:like_icon,width:\"15px\",height:\"15px\"})]})]})]},cours.id);});};_this.myRef=/*#__PURE__*/React.createRef();return _this;}_createClass(Search,[{key:\"componentDidMount\",value:function componentDidMount(){if(!this.props.notActive)this.props.menuChange('search');}},{key:\"render\",value:function render(){var _this2=this;var listComponent;if(!this.props.courses)listComponent=/*#__PURE__*/_jsx(\"div\",{className:\"search_list\"});else listComponent=/*#__PURE__*/_jsx(\"div\",{className:\"search_list\",children:this.renderList()});return/*#__PURE__*/_jsxs(\"div\",{className:\"Search\",children:[/*#__PURE__*/_jsx(GoogleAuth,{}),/*#__PURE__*/_jsx(\"div\",{className:\"search_bar_container \".concat(this.props.notActive?\"notActive\":\"\"),style:this.props.notActive?{margin:\"0px\"}:{margin:\"30px auto\"},children:/*#__PURE__*/_jsx(\"div\",{className:\"search_bar\",children:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"input\",{ref:this.myRef,type:\"search\",placeholder:\"Search...\"}),/*#__PURE__*/_jsx(\"button\",{onClick:function onClick(){_this2.onSearchButtonClick({key:\"Enter\"});},children:/*#__PURE__*/_jsx(\"img\",{src:search_icon,height:\"20px\"})})]})})}),/*#__PURE__*/_jsx(QueryButton,{notActive:this.props.notActive,callback:this.onElementClick,putUserId:this.props.putUserId}),listComponent]});}}]);return Search;}(React.Component);;var mapStateToProps=function mapStateToProps(state,ownProps){var courses=state.cours.tt_cours;if(ownProps.putUserId)courses=courses.filter(function(elem){return elem.creator===state.auth.userId;});return{isSignedIn:state.auth.isSignedIn,userId:state.auth.userId,courses:courses};};export default connect(mapStateToProps,{menuChange:menuChange,getCourses:getCourses})(Search);","map":{"version":3,"sources":["/Users/Programmation/Documents/Hubrium v_2/client_3/src/components/Body/Routes/Search.js"],"names":["React","_","connect","history","menuChange","getCourses","QueryButton","eye_icon","like_icon","stats","search_icon","GoogleAuth","Search","props","state","elementList","search","onSearchButtonClick","e","onElementClick","myRef","current","value","blur","elemList","setState","slice","onStatsClick","coursId","console","log","stopPropagation","renderList","courses","map","cours","date","Date","dateCreated","push","id","creator","userId","backgroundColor","matiere","type","image","titleDoc","description","textDecoration","userName","tags","split","tag","toLocaleDateString","day","month","year","viewed","liked","createRef","notActive","listComponent","margin","key","putUserId","Component","mapStateToProps","ownProps","tt_cours","filter","elem","auth","isSignedIn"],"mappings":"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","sourcesContent":["import React from 'react';\nimport _ from 'lodash';\nimport { connect } from 'react-redux';\nimport history from '../../../history';\n\nimport { menuChange, getCourses } from '../../../actions';\nimport QueryButton from './QueryButton';\n\nimport eye_icon from '../../eye_logo.png';\nimport like_icon from '../../like.jpeg';\nimport stats from '../../stats.png';\nimport search_icon from '../../Header/header_image/search.png';\n\nimport './Search.scss';\nimport GoogleAuth from '../../GoogleAuth';\n\nclass Search extends React.Component {\n    state = { elementList: [], search: \"\" }\n\n    constructor(props) {\n        super(props);\n        this.myRef = React.createRef();\n    }\n\n    componentDidMount() {\n        if (!this.props.notActive) this.props.menuChange('search');\n    }\n    \n    onSearchButtonClick = (e) => {\n        this.onElementClick(`SEARCH_${this.myRef.current.value}`);\n        this.myRef.current.blur();\n    }\n\n    onElementClick = (elemList) => {\n        if ((typeof elemList) !== \"string\") {      // When change the list of queries\n            this.setState({elementList: elemList});\n            this.props.getCourses(elemList, this.state.search);\n        } else {                                   // When change text in Search area\n            this.setState({search: elemList.slice(7)});\n            this.props.getCourses(this.state.elementList, elemList.slice(7));\n        }\n    }\n\n    onStatsClick = (coursId, e) => {\n        console.log(\"See stats of \", coursId);\n        e.stopPropagation();\n    }\n\n    \n\n    renderList = () => {\n        return this.props.courses.map((cours) => {\n            const date = new Date(cours.dateCreated);\n            return (\n                <div key={cours.id} className=\"stats_profile_courseItem\" onClick={()=>history.push(`/course/see/${cours.id}?creator=${cours.creator}`)} style={cours.creator === this.props.userId ? {backgroundColor:\"#FB00A060\"} : {}}>\n                    <div className=\"stats_profile_title\">\n                        <div className=\"stats_profile_extremLeft\">\n                            <div className=\"stats_profile_h3_type\"><h3>{cours.matiere}</h3><span>{cours.type}</span></div>\n                            <img src={cours.image} height=\"80px\" />\n                        </div>\n                        <div className=\"stats_profile_courseItem_left search\">\n                            <div className=\"search_title\"><h3>{cours.titleDoc}</h3> {cours.creator === this.props.userId ? <img onClick={(e)=>this.onStatsClick(cours.id, e)} src={stats} width=\"25px\" height=\"25px\" /> : \"\"}</div>\n                            <p className=\"search_description\">{cours.description}</p>\n                            <div className=\"search_belowDescription\">\n                                <span style={{textDecoration: \"underline\"}}>Created by <strong><span>{cours.userName}</span></strong></span>\n                                <div className=\"stats_profile_courseItem_tags\">{cours.tags.split(\"#\").slice(1, 4).map((tag)=><span key={tag}>{'#'+tag}</span>)}</div>\n                            </div>\n                            \n                        </div>\n                    </div>\n                    <div className=\"stats_profile_courseItem_right search\">\n                        <div>Updated<br/><strong>{date.toLocaleDateString(\"fr\", {day: 'numeric', month: 'long', year: 'numeric'})}</strong></div>\n                        <div>{cours.viewed}&nbsp;&nbsp;<img src={eye_icon} width=\"20px\" height=\"10px\"/></div>\n                        <div>{cours.liked}&nbsp;&nbsp;<img src={like_icon} width=\"15px\" height=\"15px\"/></div>\n                    </div>\n                </div>\n            );\n        })\n    }\n\n    render() {\n        let listComponent;\n        if (!this.props.courses) listComponent = <div className=\"search_list\"></div>;\n        else listComponent = <div className=\"search_list\">{this.renderList()}</div>\n\n        return (\n            <div className=\"Search\">\n                <GoogleAuth />\n                <div className={`search_bar_container ${this.props.notActive ? \"notActive\" : \"\"}`} style={this.props.notActive ? {margin:\"0px\"} : {margin:\"30px auto\"}}>\n                    <div className=\"search_bar\">\n                        <div>\n                            <input ref={this.myRef} type=\"search\" placeholder=\"Search...\"/>\n                            <button onClick={()=>{this.onSearchButtonClick({key: \"Enter\"})}}><img src={search_icon} height=\"20px\"/></button>\n                        </div>\n                    </div>\n                </div>\n                <QueryButton notActive={this.props.notActive} callback={this.onElementClick} putUserId={this.props.putUserId} />\n                {listComponent}\n            </div>\n        );\n    }\n};\n\nconst mapStateToProps = (state, ownProps) => {\n    let courses = state.cours.tt_cours;\n    if (ownProps.putUserId) courses = courses.filter((elem) => elem.creator===state.auth.userId);\n    return {  isSignedIn : state.auth.isSignedIn, userId: state.auth.userId, courses:courses  };\n}\n\nexport default connect(mapStateToProps, {menuChange, getCourses})(Search);"]},"metadata":{},"sourceType":"module"}